# Мемолизатор

Система для просмотра и лайков самых лучших мемов.

### Стек технологий

![Python](https://img.shields.io/badge/Python-blue) ![Django](https://img.shields.io/badge/Django-green) ![VK API](https://img.shields.io/badge/VK_API-blue)

### Описание задачи

Давайте разработаем систему для оценки крутости мемов!
Воспользуйтесь архивом фотографий одной из групп, чтобы наполнить свою базу отборными шутками.

1. Загрузите все мемы в вашу базу (используя API ВКонтакте).
   Выведите в консоль информацию о полученных мемах — их авторов и количество лайков.
   Используйте для скачивания Django Command

2. Реализация API:

   - Отображение одного мема
   - Три команды — лайк, дизлайк и скип каждого из предложенных мемов
   - При исполнении предыдущей команды, отображать следующий мем
   - Показывайте мемы в порядке их появления в альбоме.

3. Отрегулируйте порядок выдачи мемов таким образом, чтобы заданный заранее мем набрал больше всего лайков.
   Показывайте его чаще других, а конкурирующие мемы, набирающие много лайков, показывайте реже.

4. Пополните коллекцию ваших мемов каким-нибудь большим мемным сообществом!

5. Сделайте дашборд голосования — статистику, в которой вы сможете в реальном времени следить за тем,
   как выставляются лайки и меняется топ самых популярных мемов. Как позаботиться о том, чтобы доступ к статистике был только у нужных пользователей?

Реализовать на Django
Каждый промежуточный шаг отображать в отдельной ветке гита (backend-1, backend-2, ..., backend-5)

### Описание реализации

1. Скрипт позволяет создать 5 тестовых пользователей и загрузить в базу данных картинки со стены сообщества Вконтакте. Можно указать загружаемое количество мемов, источник загрузки и требуется ли очистка базы данных перед загрузкой.

2. Реализация согласно описанию. Так же добавлен функционал пользователей, путем использования Djoser. Просматривать/пропускать мемы могу все пользователи, лайк/дизлайк доступен только авторизованным пользователям.

3. К модели мема добавлено логическое поле is_favorite, которое добавляет мем в список для продвижения. При каждом скипе/лайке/дизлайке есть вероятность показа одного из продвигаемых мемов. Шанс задается числом в диапазоне от 0 до 100 в переменной CHANCE в файле likes_mems/conf.py. Наиболее залайканые мемы имеют низкий приоритет в выдаче и не должны показываться.

4. Реализована модель сообщества. Создание новых сообществ доступно через панель администратора. Доступ к сообществам есть только у авторизованных пользователей. Пользователи могут подписываться на понравившиеся сообщества и просматривать мемы сообщества.

5. В дашборд попадают мемы получавшие хотя бы раз лайк/дизлайк. К дашборду имеют доступ пользоватали статуса премиум. Переопределана модель пользователя, добавлены поля ролей.

Каждый пункт выполнен в отдельной ветке (backend-1, backend-2, ..., backend-5).

### Особенности запуска.

Для заполнения базы данных необходимо добавить в переменные окружения:

```
TOKEN_VK_API = 'ваш_токен'
```

Установить настройки в файле скрипта scripts/load_data.py:

```
 # Указать группу для загрузки картинок
DOMAIN = 'домен_группы_вконтакте_для_загрузки_мемов'

# установите True если хотите удалить данные о существующих пользователях
ERASE_USER = False

# установите True если хотите удалить данные о существующих мемах
ERASE_MEM = False

# Указать количество создаваемых мемов
COUNT_MEM = 5
```

Для запуска скрипта, после развертывания виртуального окружения и применения миграций необходимо создать папку media/images и выполнить команду:

```
python manage.py runscript load_data
```

Общие настройки проекта находятся в файле likes_mems/conf.py

### Доступные запросы

Получить мем:

```
GET /api/mem
```

Пропустить мем:

```
GET /api/mem/<id>/skip
```

Лайкнуть текущий мем и перейти на следующий:

```
GET /api/mem/<id>/like
```

Дизлайкнуть текущий мем и перейти на следующий:

```
GET /api/mem/<id>/dislike
```

Получить список сообществ:

```
GET /api/community
```

Получить информацию о сообществе:

```
GET /api/community/<slug>
```

Получить список пользователях сообщества:

```
GET /api/community/<slug>/users
```

Получить список мемов сообщества:

```
GET /api/community/<slug>/mems
```

Подписаться/отписаться от сообщества:

```
POST /api/community/<slug>/subscribe/
```

Получить мемы дашборда:

```
GET /api/dashboard
```

Подробную документацию можно посмотреть по следующим адресам, с описанием всех поинтов и использованием модели пользователя:

```
GET /api/swagger/
```

```
GET /api/redoc/
```
